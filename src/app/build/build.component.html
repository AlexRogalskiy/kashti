<div class="grid-container build-chart- active-chart">
  <div class="build-chart-bg"></div>

  <div class="grid-content build-header-wrap">
    <div class="grid-block horizontal">
      <div class="small-12">

        <div class="build-header">
          <h1>
            <a routerLink="/projects/{{build.project_id}}">
              <i class="icon ion-ios-arrow-back-outline"></i>
            </a>
            Build &nbsp;
            <em>{{ build.id }}</em>
          </h1>

          <div class="build-status">
            <div class="unknown" *ngIf="!build.worker?.status"><i class="icon ion-md-radio-button-off"></i>  Log Unavailable</div>

            <div class="pending" *ngIf="build.worker?.status == 'Pending'"><div class="spinner"></div> Initializing...</div>
            <div class="running" *ngIf="build.worker?.status == 'Running'"><div class="spinner"></div> Build started...</div>

            <div class="success" *ngIf="build.worker?.status == 'Succeeded'"><i class="icon ion-md-checkmark-circle"></i> {{ build.worker.status }}</div>
            <div class="failed" *ngIf="build.worker?.status == 'Failed'"><i class="icon ion-md-close-circle"></i> {{ build.worker.status }}</div>
          </div>

          <div class="row build-metadata">
            <div class="small-6 text-left columns">Started at {{ build.worker.start_time }} </div>
            <div class="small-6 text-right columns">Finished at {{ build.worker.end_time }}</div>
          </div>

          <div class="horizontal build-chart build-chart-1">

            <div class="task task-0">
              <a href="">
                <span title="git">
                  <i class="icon logo-github"></i>
                </span>
              </a>
            </div>

            <div class="task task-1" >
              <span title="job.name" class=" ">{{ job.id }}</span>
            </div>

            <em></em>
            <em></em>
            <em></em>
            <em></em>
            <em></em>
          </div>
        </div>

      </div>
    </div>
  </div>

  <div class="job-list">
    <h4>
      <span ng-show="jobs.length == '1'" class="">
        <span class="job-count">4 </span> jobs ran inside this build:</span>
    </h4>

    <ul class="build-details" ng-hide="jobs.length == '0'" id="build-details">
      <li class="parent">
        <em ng-show="build.provider == 'github'" class="ng-hide">
          <i class="icon logo-github"></i> {{ build.provider }}</em>
        <!-- Pending API hookup:
          <em ng-show="build.provider == 'dockerhub'" class="  ng-hide"><img src="assets/images/docker.png" alt="dockerhub"> brigade-cli</em>
          <em ng-show="build.provider == 'slackbot'" class="  ng-hide"><img src="assets/images/slack.png" alt="Slack"> brigade-cli</em>
          <em ng-show="!(
            build.provider === 'slackbot' ||
            build.provider === 'dockerhub' ||
            build.provider === 'github'
          )" class=" "> brigade-cli</em>  -->
        :
        <em class=" ">{{ build?.type }}</em>
        started a build via
        <em class=" ">commit {{ build.revision?.commit }}</em>
      </li>

      <!-- Pending API hookup:
        ngRepeat: job in jobs -->
      <li class="job success" id="{{ job?.id }}" *ngFor="let job of jobs">
        <small class=" ">Started at {{ job?.start_time }}</small>
        <h5>dind {{job.name}}</h5>

        <div class="job-response">
          <i class="icon ion-md-checkmark-circle status-success"></i>
          {{ job?.status }}
        </div>
        <!-- Pending API hookup:
        <div class="job-response active ng-hide" ng-show="job.status == 'Pending'">
          <img src="assets/images/rolling.svg" class="status-active">
          Pending
        </div>
        <div class="job-response fail ng-hide" ng-show="job.status = Failed">
          <i class="icon ion-md-close-circle status-fail"></i>
          Failed
        </div> -->

        <!-- log output -->
        <div ng-controller="logController">
          <div ng-show="logerror == '404'" class="ng-hide">
            <dl>
              <dt>Image:</dt>
              <dd class=" ">{{ job?.image }}</dd>
              <dt>ID:</dt>
              <dd class=" ">{{ job?.id }}</dd>
              <dt>Log output:</dt>
            </dl>
            <div class="log-wrap">

              <div hljs="" hljs-source="logs" class="log-inner">
                <pre><code class="hljs">
{{log}}
              </code></pre>
              </div>

              <!-- <a ng-click="expandLog = !expandLog">
                <span ng-show="!expandLog" class="">
                  <i class="icon md-arrow-dropdown"></i> Expand log</span>
                <span ng-show="expandLog" class="ng-hide">
                  <i class="icon md-arrow-dropup"></i> Collapse log</span>
              </a> -->
            </div>
          </div>
        </div>

        <small class=" ">Finished at {{ job?.end_time }}</small>
      </li>

    </ul>
  </div>
